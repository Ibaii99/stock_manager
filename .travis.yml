language: java
jdk:
  - openjdk8
services:
  - mysql
before_script:
  - cd stock_manager
  - mysql -u root -e 'CREATE DATABASE stock_managerdb;'
  - mysql -u root -e "CREATE USER 'spq'@'localhost' IDENTIFIED BY 'spq';"
  - mysql -u root -e "GRANT ALL ON stock_managerdb.* TO 'spq'@'localhost';"
addons:
  sonarcloud:
    - organization: ibaii99
    - token: 
        secure: ${SONAR_TOKEN2}
script:
    # - sonar-scanner
    - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=Ibaii99_stock_manager
